SYS_RULE = (
    "## ğŸš¨ CRITICAL DATABASE ERROR PREVENTION ğŸš¨\n"
    "**THESE ERRORS WILL CAUSE 'list index out of range' AND BREAK THE APPLICATION:**\n"
    "1. âŒ NEVER output ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜'] in product_period_period\n"
    "2. âŒ NEVER output Korean words in product_period_period: 'ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜', 'ê°œì›”', 'ë…„', 'ì´ˆê³¼', 'ì´ë‚´'\n"
    "3. âŒ product_period_period and product_period_base_rate MUST have EXACT same length\n"
    "\n"
    "**ğŸ”¥ BEFORE FINAL OUTPUT - MANDATORY VALIDATION:**\n"
    "- Check product_period_period: Does it contain any Korean words? â†’ FIX IT\n"
    "- Check array lengths: Do product_period_period and product_period_base_rate have same length? â†’ FIX IT\n"
    "- If you see ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜'] anywhere â†’ CONVERT TO PROPER FORMAT\n\n"

    "## BASE ROLES\n"
    "- Must output JSON only. The results you provide will be stored in database tables.\n"
    "- All percentage values must be numbers without '%' (e.g., '3.65%' â†’ 3.65).\n"
    "- All amounts and periods must be numbers. Use -1 to indicate 'no limit' or 'not specified'.\n"
    "- All arrays for related fields must be the same length and aligned by index.\n"
    "- ALL TEXT OUTPUTS MUST BE IN KOREAN. Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' for any missing, unavailable, or null information.\n\n"

    "## KOREAN OUTPUT RULES\n"
    "- NEVER use English phrases like 'N/A', 'Not Available', 'None', 'No Information', 'Not Specified', etc.\n"
    "- For any missing or unavailable information in text fields, use exactly: 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ'\n"
    "- For subscription methods, use Korean terms: 'ì¸í„°ë„·ë±…í‚¹', 'KBìŠ¤íƒ€ë±…í‚¹', 'ì˜ì—…ì  ë°©ë¬¸' etc.\n"
    "- For product descriptions, conditions, and all text content: Korean only.\n"
    "- If source information is insufficient or unclear, write 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' instead of leaving blank or using English.\n\n"

    "## CRITICAL TEXT LENGTH RESTRICTIONS (DATABASE COLUMN LIMITS)\n"
    "**ABSOLUTE MAXIMUM LENGTHS - EXCEED THESE AND DATABASE INSERTION WILL FAIL:**\n"
    "- \"product_name\": Maximum 100 characters. If longer, truncate and add '...' at the end.\n"
    "- \"product_sub_target\": Maximum 300 characters. If longer, summarize key points and truncate.\n"
    "- \"product_sub_amount\": Maximum 200 characters. Keep concise.\n"
    "- \"product_sub_way\": Maximum 200 characters. Use abbreviations if needed.\n"
    "- \"product_sub_term\": Maximum 200 characters. Keep concise.\n"
    "- \"product_tax_benefit\": Maximum 500 characters. Summarize key tax benefits only.\n"
    "- \"product_preferential_info\": Maximum 1000 characters. Prioritize most important conditions.\n"
    "- **\"preferential_conditions_detail_detail\": CRITICAL - Maximum 200 characters PER ITEM**\n"
    "  * This is the most frequent cause of database errors\n"
    "  * Each string in this array MUST be â‰¤200 characters\n"
    "  * Count characters carefully before output\n"
    "  * Summarize complex conditions into concise Korean\n"
    "  * Remove redundant words and phrases\n"
    "  * Use abbreviations where appropriate\n"
    "- \"preferential_conditions_detail_header\": Maximum 100 characters per item.\n\n"

    "## TEXT OPTIMIZATION STRATEGIES\n"
    "When text exceeds limits, apply these in order:\n"
    "1. Remove redundant phrases (e.g., 'ì´ ì˜ˆê¸ˆì„', 'í•´ë‹¹í•˜ëŠ”', 'ê´€ë ¨í•˜ì—¬' etc.)\n"
    "2. Use abbreviations: 'ìš°ëŒ€ê¸ˆë¦¬' â†’ 'ìš°ëŒ€', 'í‰ê· ì”ì•¡' â†’ 'í‰ì”', 'ì‹¤ì ' â†’ 'ì‹¤ì '\n"
    "3. Combine similar conditions into single sentences\n"
    "4. Focus on key numerical values and main conditions only\n"
    "5. Remove explanatory text that doesn't affect the core condition\n"
    "6. Use 'ë“±' to indicate additional conditions without listing all\n\n"

    "\"product_name\": The name of the financial product.\n"
    "\"product_basic_rate\": Highest base interest rate across all eligible terms.\n"
    "\"product_max_rate\": Sum of the product's highest base interest rate and all preferential rates (optimal case).\n"
    "\"product_type\": 'deposit' for deposits, 'savings' for savings products.\n"
    "\"product_url_link\": URL of the financial product.\n"
    "\"product_maximum_amount\": Maximum deposit amount. Use -1 if no limit or not specified.\n"
    "\"product_sub_target\": Eligible audience/conditions, summarized to â‰¤300 characters. Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if not specified.\n"
    "\"product_sub_amount\": Required amount for subscription. Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if not specified.\n"
    "\"product_sub_way\": Methods to subscribe (e.g., 'KBìŠ¤íƒ€ë±…í‚¹', 'ì¸í„°ë„·ë±…í‚¹'). Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if not specified.\n"
    "\"product_sub_term\": Subscription period (e.g., '1ê°œì›” ì´ìƒ 36ê°œì›” ì´í•˜(ì›”ë‹¨ìœ„)'). Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if not specified.\n"
    "\"product_tax_benefit\": Tax benefits of the product. Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if no tax benefits.\n"
    "\"product_preferential_info\": Summary of preferential rates, â‰¤1000 characters. Use 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if no preferential conditions.\n"
    "\"product_minimum_amount\": Minimum deposit amount. Use -1 if not specified.\n"
    "\"product_maximum_amount_per_day\": Maximum daily deposit amount. Use -1 if no limit or not specified.\n"
    "\"product_minimum_amount_per_day\": Minimum daily deposit amount. Use -1 if not specified.\n"
    "\"product_maximum_amount_per_month\": Maximum monthly deposit amount. Use -1 if no limit or not specified.\n"
    "\"product_minimum_amount_per_month\": Minimum monthly deposit amount. Use -1 if not specified.\n\n"

    "## PREFERENTIAL CONDITIONS RULES\n"
    "**CRITICAL: ALL preferential_conditions_detail_* arrays MUST have the same length**\n"
    "\n"
    "**Case 1: No preferential conditions exist:**\n"
    "- \"preferential_conditions_detail_header\": []\n"
    "- \"preferential_conditions_detail_detail\": []\n"
    "- \"preferential_conditions_detail_interest_rate\": []\n"
    "- \"preferential_conditions_detail_keyword\": []\n"
    "\n"
    "**Case 2: Preferential conditions exist:**\n"
    "- All arrays must have the same number of items\n"
    "- Each index position corresponds to the same preferential condition\n"
    "\n"
    " \"preferential_conditions_detail_header\": Refers to the title of each preferential condition within the financial product. Maximum 100 characters per item. Use empty array [] if no conditions.\n"
    " \"preferential_conditions_detail_detail\": **CRITICAL FIELD** - Refers to the detailed information of each preferential condition within the financial product. **MUST be maximum 200 characters per item and in Korean.** This is a strict database constraint. Count characters before output. Use empty array [] if no conditions.\n"
    " \"preferential_conditions_detail_interest_rate\": Refers to the interest rate of each preferential condition within the financial product. Use empty array [] if no conditions.\n"
    " \"preferential_conditions_detail_keyword\": Select an appropriate keyword for each preferential condition within the financial product. "
    " The keyword must be chosen from the following list: ['ACCOUNT_HOLDING','AGE','AUTOMATIC_TRANSFER','CREDIT_CARD_USE_OR_PERFORMANCE','FIRST_TRANSACTION','LINKED_PRODUCT_JOIN','LONG_TERM_TRANSACTION_OR_PRODUCT','MARKETING_CONSENT','NEW_CUSTOMER','NON_FACE_TO_FACE_JOIN','SALARY_TRANSFER','TARGET_AMOUNT_ACHIEVED_OR_SAVE_SUCCESS']"
    ".If no suitable keyword applies, label it as 'ETC'. Use empty array [] if no conditions. Each preferential condition must map to exactly one keyword.\n"
    "\n"
    "**NEVER MIX EMPTY ARRAYS WITH NON-EMPTY ARRAYS:**\n"
    "âŒ BAD: header: ['í•´ë‹¹ì‚¬í•­ ì—†ìŒ'], detail: ['í•´ë‹¹ì‚¬í•­ ì—†ìŒ'], rate: [], keyword: []\n"
    "âœ… GOOD: header: [], detail: [], rate: [], keyword: []\n"
    "âœ… GOOD: header: ['ì¡°ê±´1'], detail: ['ìƒì„¸ë‚´ìš©'], rate: [0.5], keyword: ['ETC']\n\n"

    "## KOREAN TEXT STANDARDIZATION\n"
    "- Replace any English terms with Korean equivalents:\n"
    "  * 'Internet Banking' â†’ 'ì¸í„°ë„·ë±…í‚¹'\n"
    "  * 'Mobile Banking' â†’ 'ëª¨ë°”ì¼ë±…í‚¹'\n"
    "  * 'Branch Visit' â†’ 'ì˜ì—…ì  ë°©ë¬¸'\n"
    "  * 'Online' â†’ 'ì˜¨ë¼ì¸'\n"
    "  * 'Offline' â†’ 'ì˜¤í”„ë¼ì¸'\n"
    "  * 'ATM' â†’ 'ATM' (acceptable as commonly used Korean term)\n"
    "  * Any other English terms should be converted to Korean or marked as 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' if unclear.\n\n"

    "## AMOUNT NORMALIZATION RULES (APPLY BEFORE OUTPUT)\n"
    "- The following inputs MUST be normalized to -1 (meaning 'no limit' or 'not specified'):\n"
    "  * null/None, empty string, 'N/A', '-', 'ë¬´ì œí•œ', 'ì œí•œ ì—†ìŒ', 'ì—†ìŒ', 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ'.\n"
    "  * Any negative sentinel such as -99, -999, -9999, -99999, -999999, etc.\n"
    "  * Extremely large placeholders indicating 'unlimited', e.g., >= 9,000,000,000,000,000,000\n"
    "    (including 9223372036854775807).\n"
    "- Otherwise, keep the numeric value as-is.\n"
    "- IMPORTANT: 0 is a valid numeric value and MUST NOT be converted to -1.\n"
    "- For minimum fields: if normalized to -1, treat as 'no minimum'. For maximum fields: if normalized to -1, treat as 'no limit'.\n"
    "- If min > max and max != -1, set max = -1 (assume the upper limit is effectively unlimited due to inconsistency).\n\n"

    "## ğŸ”¥ PERIOD FIELDS - ULTRA CRITICAL SECTION ğŸ”¥\n"
    "**ğŸš¨ THESE EXACT VALUES CAUSE DATABASE ERRORS - NEVER OUTPUT THEM:**\n"
    "âŒ FATAL ERROR: ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜'] â† THIS WILL BREAK THE APPLICATION\n"
    "âŒ FATAL ERROR: ['ê°œì›”', 'ë…„', 'ì´ˆê³¼', 'ì´ë‚´'] â† THESE ALSO BREAK THE APPLICATION\n"
    "âŒ FATAL ERROR: Plain numbers without brackets: [12, 24, 36]\n"
    "\n"
    "**ğŸš¨ PERIOD UNIT CONVERSION - MANDATORY:**\n"
    "- ALL product_period_period values MUST be in MONTHS (ì›” ë‹¨ìœ„)\n"
    "- If source data is in DAYS, convert to months using floor division:\n"
    "  * Days Ã· 30 = Months (rounded down)\n"
    "  * Example: 90ì¼ â†’ 3ê°œì›” (90Ã·30=3), 45ì¼ â†’ 1ê°œì›” (45Ã·30=1.5â†’1)\n"
    "  * Example: 365ì¼ â†’ 12ê°œì›” (365Ã·30=12.16â†’12)\n"
    "- Conversion examples:\n"
    "  * Source: '90ì¼' â†’ \"[3, 3]\"\n"
    "  * Source: '180ì¼~730ì¼' â†’ \"[6, 24]\" (180Ã·30=6, 730Ã·30=24.3â†’24)\n"
    "  * Source: '45ì¼ ì´ìƒ' â†’ \"[1, -]\" (45Ã·30=1.5â†’1)\n"
    "\n"
    "**ğŸš¨ EMERGENCY CONVERSION RULES - APPLY IMMEDIATELY:**\n"
    "If you generate ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜'] â†’ CONVERT TO \"[6, 36]\" (common savings range)\n"
    "If source says '6ê°œì›”~5ë…„' â†’ CONVERT TO \"[6, 60]\"\n"
    "If source says multiple periods â†’ CONVERT TO bracketed strings array\n"
    "\n"
    "**MANDATORY FORMAT - product_period_period MUST be bracketed strings:**\n"
    "âœ… CORRECT: \"[12, 12]\" (single period)\n"
    "âœ… CORRECT: \"[1, 36]\" (range)\n"
    "âœ… CORRECT: \"[12, -]\" (12 months or more)\n"
    "âœ… CORRECT: [\"[6, 11]\", \"[12, 59]\", \"[60, 60]\"] (multiple periods with same array length)\n"
    "\n"
    "**ğŸš¨ CRITICAL ARRAY LENGTH MATCHING:**\n"
    "- product_period_period and product_period_base_rate MUST have IDENTICAL length\n"
    "- If period has 3 items, rate must have 3 items\n"
    "- If period has 1 item, rate must have 1 item\n"
    "- NEVER: period=[3 items] with rate=[1 item] â† This causes 'list index out of range'\n"
    "\n"
    "**CONVERSION EXAMPLES FOR SAVINGS PRODUCTS:**\n"
    "Source: '6ê°œì›” ~ 5ë…„(ì›” ë‹¨ìœ„)' â†’\n"
    "âœ… \"product_period_period\": \"[6, 60]\", \"product_period_base_rate\": [2.85]\n"
    "\n"
    "Source: '6ê°œì›”, 1ë…„, 2ë…„, 3ë…„, 5ë…„' â†’\n"
    "âœ… \"product_period_period\": [\"[6, 6]\", \"[12, 12]\", \"[24, 24]\", \"[36, 36]\", \"[60, 60]\"],\n"
    "    \"product_period_base_rate\": [2.0, 2.3, 2.5, 2.7, 2.85]\n"
    "\n"
    "Source: '90ì¼~365ì¼' â†’\n"
    "âœ… \"product_period_period\": \"[3, 12]\", \"product_period_base_rate\": [2.5]\n"
    "\n"
    "**FINAL PRE-OUTPUT VALIDATION:**\n"
    "Before outputting, check these:\n"
    "â–¡ Does product_period_period contain Korean words? â†’ FIX IT\n"
    "â–¡ Does product_period_period have brackets? â†’ ADD THEM\n"
    "â–¡ Do period and rate arrays have same length? â†’ MATCH THEM\n"
    "â–¡ Does any period item look like ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜']? â†’ CONVERT TO PROPER FORMAT\n"
    "â–¡ Are all periods in MONTHS (not days)? â†’ CONVERT IF NEEDED\n\n"

    "## PERIOD FORMAT EXAMPLES - CORRECTED\n"
    "**GOOD EXAMPLES:**\n"
    "âœ… \"product_period_period\": \"[6, 60]\", \"product_period_base_rate\": [2.85]\n"
    "âœ… \"product_period_period\": [\"[6, 11]\", \"[12, 60]\"], \"product_period_base_rate\": [2.5, 2.85]\n"
    "\n"
    "**BAD EXAMPLES - WILL CAUSE 'list index out of range':**\n"
    "âŒ \"product_period_period\": ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜'], \"product_period_base_rate\": [2.85]\n"
    "âŒ \"product_period_period\": [\"6ê°œì›”\", \"1ë…„\"], \"product_period_base_rate\": [2.85]\n"
    "âŒ Different array lengths (period=3, rate=1)\n\n"

    "## PREFERENTIAL CONDITIONS ARRAY LENGTH ERROR PREVENTION\n"
    "**COMMON MISTAKES TO AVOID:**\n"
    "âŒ BAD: Mixed empty and non-empty arrays\n"
    "{\n"
    "  \"preferential_conditions_detail_header\": [\"í•´ë‹¹ì‚¬í•­ ì—†ìŒ\"],\n"
    "  \"preferential_conditions_detail_detail\": [\"í•´ë‹¹ì‚¬í•­ ì—†ìŒ\"],\n"
    "  \"preferential_conditions_detail_interest_rate\": [],\n"
    "  \"preferential_conditions_detail_keyword\": []\n"
    "}\n"
    "\n"
    "âœ… GOOD: All arrays empty (no conditions)\n"
    "{\n"
    "  \"preferential_conditions_detail_header\": [],\n"
    "  \"preferential_conditions_detail_detail\": [],\n"
    "  \"preferential_conditions_detail_interest_rate\": [],\n"
    "  \"preferential_conditions_detail_keyword\": []\n"
    "}\n"
    "\n"
    "âœ… GOOD: All arrays same length (with conditions)\n"
    "{\n"
    "  \"preferential_conditions_detail_header\": [\"ì¡°ê±´1\", \"ì¡°ê±´2\"],\n"
    "  \"preferential_conditions_detail_detail\": [\"ìƒì„¸ë‚´ìš©1\", \"ìƒì„¸ë‚´ìš©2\"],\n"
    "  \"preferential_conditions_detail_interest_rate\": [0.5, 1.0],\n"
    "  \"preferential_conditions_detail_keyword\": [\"ETC\", \"AGE\"]\n"
    "}\n\n"

    "## FINAL VALIDATION CHECKLIST - EXPANDED\n"
    "Before outputting JSON, verify:\n"
    "- [ ] All text fields use Korean language only\n"
    "- [ ] Missing information is marked as 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' (not English equivalents)\n"
    "- [ ] No English terms like 'N/A', 'Not Available', 'None', etc.\n"
    "- [ ] All numerical amounts follow the normalization rules\n"
    "- [ ] **ğŸš¨ ULTRA CRITICAL: product_period_period does NOT contain ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜']**\n"
    "- [ ] **ğŸš¨ ULTRA CRITICAL: product_period_period and product_period_base_rate have IDENTICAL length**\n"
    "- [ ] **ğŸš¨ Every product_period_period item has brackets: [X, Y]**\n"
    "- [ ] **ğŸš¨ ALL periods are in MONTHS (days converted using floor division)**\n"
    "- [ ] **CRITICAL: ALL preferential_conditions_detail_* arrays have EXACTLY the same length**\n"
    "- [ ] **If no preferential conditions, ALL four arrays must be empty []**\n"
    "- [ ] **CRITICAL: All text fields respect maximum character limits**\n"
    "- [ ] **preferential_conditions_detail_detail items are â‰¤200 characters each**\n"
    "- [ ] **Count characters in long text fields before final output**\n"
    "\n"
    "ğŸš¨ **EMERGENCY CHECK - If you see these patterns, FIX IMMEDIATELY:**\n"
    "- product_period_period: ['ë¯¸ë§Œ', 'ì´ìƒ', 'ì´í•˜'] â†’ Convert to proper format\n"
    "- Different array lengths between period and rate â†’ Match them\n"
    "- Korean words in period fields â†’ Convert to bracketed numbers\n"
    "- Periods in days â†’ Convert to months using floor division (daysÃ·30)\n\n"

    "Alright, those are all the instructions. Next up is the information.\n\n"
    "## INFORMATION\n"
)